<span ng-hide="true" ng-transclude></span>

<div class="sbxGrid">
    <!-- HEADER START -->
    <div class="sbxGridHeader clearfix">
        <!-- Selected objects actions dropdown -->
        <div ng-if="objectActions.length > 0" class="btn-group pull-left dropdown" dropdown is-open="uiState.objectActionsDropdownOpen">
            <button ng-disabled="objectActionsEnabled() == false" dropdown-toggle type="button" class="btn btn-sm btn-default dropdown-toggle">
                <span class="fa fa-cog"></span>
            </button>

            <ul class="dropdown-menu" role="menu">
                <li ng-repeat="objectAction in objectActions">
                    <a href="" ng-click="performObjectAction(objectAction)">{{objectAction.name}}</a>
                </li>
            </ul>
        </div>

        <div class="pull-right">
            <div ng-if="filterEnabled()" class="input-group pull-left filter">
                <input type="text" placeholder="Filter" class="form-control"
                    ng-model="uiState.filter" ng-change="filterChanged()"></input>
            </div>

            <div ng-if="columnConfigurationEnabled()" class="btn-group pull-right columns-configuration" dropdown is-open="uiState.configurationDropdownOpen">
                <button type="button" class="btn btn-sm btn-default dropdown-toggle pull-left">
                    <span class="fa fa-wrench"></span>
                </button>

                <ul ng-click="$event.stopPropagation()" class="dropdown-menu" role="menu">
                    <li ng-repeat="columnDefinition in columnDefinitions track by columnDefinition.property">
                        <label class="checkbox">
                            <input type="checkbox" ng-model="columnConfigurations[columnDefinition.property].visible" ng-change="columnVisibilityCheckboxChanged()"></input> 
                            {{columnDefinition.title}}
                        </label>
                    </li>
                </ul>
            </div>

            <div ng-if="pageSizes !== undefined && pageSizes.length > 1" class="btn-group dropdown" dropdown is-open="uiState.pageSizeOpen">
                <span>Page Size:&nbsp;&nbsp;<button type="button" class="btn btn-primary dropdown-toggle" dropdown-toggle>
                    {{currentPageSize}} <span class="caret"></span></button>
                </span>
                <ul class="dropdown-menu" role="menu">
                    <li ng-repeat="currentSize in pageSizes">
                        <a href="" ng-click="pageSizeChanged(currentSize)">{{currentSize}}</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <!-- HEADER END -->

    <!-- CONTENT TABLE START -->
    <div class="tableWrapper">

    <table class="table table-bordered table-hover" ng-cloak>
        <col width="20px" ng-if="objectActions.length > 0" />

        <col ng-repeat="columnDefinition in columnDefinitions track by columnDefinition.property"
            ng-show="columnConfigurations[columnDefinition.property].visible" />

        <thead>
            <tr>
                <th ng-if="objectActions.length > 0">
                    <input type="checkbox"
                        ng-model="uiState.selectAllChecked"
                        ng-change="selectAllChanged()"></input>
                </th>
                
                <th ng-repeat="columnDefinition in columnDefinitions track by columnDefinition.property"
                    ng-click="columnClicked(columnDefinition)"
                    ng-show="columnConfigurations[columnDefinition.property].visible"
                    class="text-nowrap">
                    {{columnDefinition.title}}

                    <i ng-class="columnHeaderOrderByClass(columnDefinition)"></i>
                </th>
            </tr>
        </thead>
        
        <tbody ng-style="tableBodyStyle()">
            <tr ng-repeat="rowObject in objectList"
                ng-click="rowClicked(rowObject)"
                ng-class="rowCSSClasses(rowObject)">

                <td ng-if="objectActions.length > 0">
                    <input type="checkbox"
                        ng-if="rowHasActions(rowObject)"
                        ng-click="rowSelectionCheckboxClicked(rowObject); $event.stopPropagation()"
                        ng-checked="rowObjectSelected(rowObject)"></input>
                </td>

                <td sbx-grid-internal-td
                    ng-repeat="columnDefinition in columnDefinitions track by columnDefinition.property"
                    ng-show="columnConfigurations[columnDefinition.property].visible">
                    {{filteredCellValues[$parent.$index][columnDefinition.property]}}
                </td>
            </tr>
        </tbody>
    </table>

    <div class="empty-message" ng-if="objectList && objectList.length == 0">{{uiState.emptyMessage}}</div>

    </div>
    <!-- CONTENT TABLE END -->

    <!-- PAGER START -->
    <ul class="pager">
        <li class="previous"
            ng-if="currentPage > 0"
            ng-click="loadPreviousPage()">

            <a href="#">&larr; Previous</a>
        </li>
        <li class="next"
            ng-if="morePagesExists"
            ng-click="loadNextPage()">

            <a href="#">Next &rarr;</a>
        </li>
    </ul>
    <!-- PAGER END -->
</div>