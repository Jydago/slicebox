<span ng-hide="true" ng-transclude></span>

<div class="sbx-grid">
    <!-- HEADER START -->
    <!-- <div class="sbxGridHeader clearfix">
        <div ng-if="objectActions.length > 0" class="btn-group pull-left dropdown" dropdown is-open="uiState.objectActionsDropdownOpen">
            <button ng-disabled="objectActionsEnabled() == false" dropdown-toggle type="button" class="btn btn-sm btn-default dropdown-toggle">
                <span class="fa fa-cog"></span>
            </button>

            <ul class="dropdown-menu" role="menu">
                <li ng-repeat="objectAction in objectActions">
                    <a href=""
                        ng-class="{ 'disabled-link': !objectActionEnabled(objectAction) }"
                        ng-click="performObjectAction($event, objectAction)">{{objectAction.name}}</a>
                </li>
            </ul>
        </div>

        <div class="pull-right">
            <div ng-if="filterEnabled()" class="input-group pull-left filter">
                <input type="text" placeholder="Filter" class="form-control"
                    ng-model="uiState.filter" ng-change="filterChanged()"></input>
            </div>

            <div ng-if="columnConfigurationEnabled()" class="btn-group pull-right columns-configuration" dropdown is-open="uiState.configurationDropdownOpen">
                <button type="button" class="btn btn-sm btn-default dropdown-toggle pull-left">
                    <span class="fa fa-wrench"></span>
                </button>

                <ul ng-click="$event.stopPropagation()" class="dropdown-menu" role="menu">
                    <li ng-repeat="columnDefinition in columnDefinitions track by columnDefinition.property">
                        <label class="checkbox">
                            <input type="checkbox" ng-model="columnConfigurations[columnDefinition.property].visible" ng-change="columnVisibilityCheckboxChanged()"></input> 
                            {{columnDefinition.title}}
                        </label>
                    </li>
                </ul>
            </div>

            <div ng-if="pageSizes !== undefined && pageSizes.length > 1" class="btn-group dropdown" dropdown is-open="uiState.pageSizeOpen">
                <span>Page Size:&nbsp;&nbsp;<button type="button" class="btn btn-primary dropdown-toggle" dropdown-toggle>
                    {{currentPageSize}} <span class="caret"></span></button>
                </span>
                <ul class="dropdown-menu" role="menu">
                    <li ng-repeat="currentSize in pageSizes">
                        <a href="" ng-click="pageSizeChanged(currentSize)">{{currentSize}}</a>
                    </li>
                </ul>
            </div>
        </div>
    </div> -->

    <div class="header">
        <md-select ng-change="objectActionSelected()" ng-model="uiState.selectedObjectAction" ng-if="objectActions.length > 0" ng-disabled="objectActionsEnabled() == false">
            <md-select-label><span class="fa fa-cog"></span></md-select-label>
            <md-option class="sbx-grid-object-action-option" ng-repeat="objectAction in objectActions" ng-value="objectAction">{{objectAction.name}}</md-option>
        </md-select>
    </div>
    <!-- HEADER END -->

    <!-- CONTENT TABLE START -->
    <md-content class="table-wrapper">

        <table ng-cloak class="ng-cloak">
            <col width="20px" ng-if="objectActions.length > 0" />

            <col ng-repeat="columnDefinition in columnDefinitions track by columnDefinition.property"
                ng-show="columnConfigurations[columnDefinition.property].visible" />

            <thead>
                <tr>
                    <th ng-if="objectActions.length > 0" class="column-header">
                        <md-checkbox ng-model="uiState.selectAllChecked"
                            ng-change="selectAllChanged()"></md-checkbox>
                    </th>
                    
                    <th ng-repeat="columnDefinition in columnDefinitions track by columnDefinition.property"
                        ng-click="columnClicked(columnDefinition)"
                        ng-show="columnConfigurations[columnDefinition.property].visible"
                        class="column-header">
                        {{columnDefinition.title}}

                        <i ng-class="columnHeaderOrderByClass(columnDefinition)"></i>
                    </th>
                </tr>
            </thead>
            
            <tbody ng-style="tableBodyStyle()">
                <tr ng-repeat="rowObject in objectList"
                    ng-click="rowClicked(rowObject)"
                    ng-class="rowCSSClasses(rowObject)">

                    <td ng-if="objectActions.length > 0" class="table-cell">
                        <md-checkbox
                            ng-if="rowHasActions(rowObject)"
                            ng-model="objectActionSelection[$index]"
                            ng-click="$event.stopPropagation()"></md-checkbox>
                    </td>

                    <td sbx-grid-internal-td
                        ng-repeat="columnDefinition in columnDefinitions track by columnDefinition.property"
                        ng-show="columnConfigurations[columnDefinition.property].visible"
                        class="table-cell">
                        {{filteredCellValues[$parent.$index][columnDefinition.property]}}
                    </td>
                </tr>
            </tbody>
        </table>

        <div class="empty-message" ng-if="objectList && objectList.length == 0">{{uiState.emptyMessage}}</div>

    </md-content>
    <!-- CONTENT TABLE END -->

    <!-- PAGER START -->
    <div layout="row" class="pager">
        <div>
            <md-button class="md-primary" ng-if="currentPage > 0" ng-click="loadPreviousPage()">&larr; Previous</md-button>
        </div>

        <div flex></div>

        <div>
            <md-button class="md-primary" ng-if="morePagesExists" ng-click="loadNextPage()">Next &rarr;</md-button>
        </div>
    </div>
    <!-- PAGER END -->
</div>